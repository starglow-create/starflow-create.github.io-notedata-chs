<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>çŸ¥è¯†åº“ç¬”è®°</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
      color: #333;
      transition: all 0.3s ease;
    }
    .container {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }
    h1, h2 {
      text-align: center;
      color: #555;
    }
    .section {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin: 10px 0 5px;
    }
    input, select, button, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      background-color: #007bff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    .note-list {
      list-style: none;
      padding: 0;
    }
    .note-item {
      padding: 10px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .note-actions button {
      margin-left: 10px;
    }
    .loading {
      text-align: center;
      color: #999;
    }
    .search-box {
      display: flex;
      gap: 10px;
    }
    .gallery {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    .gallery-item {
      position: relative;
      width: 100%;
      aspect-ratio: 1 / 1;
      overflow: hidden;
      border-radius: 8px;
    }
    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .gallery-item button {
      position: absolute;
      bottom: 5px;
      right: 5px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“š çŸ¥è¯†åº“ç¬”è®°</h1>

    <!-- è‡ªå®šä¹‰ä¸»é¢˜ -->
    <div class="section">
      <h2>ğŸ¨ è‡ªå®šä¹‰ä¸»é¢˜</h2>
      <label for="page-bg-color">é¡µé¢èƒŒæ™¯é¢œè‰²ï¼š</label>
      <input type="color" id="page-bg-color" value="#ffffff">
      <button onclick="applyBackgroundColor()">åº”ç”¨èƒŒæ™¯é¢œè‰²</button>

      <label for="text-color">é¡µé¢æ–‡å­—é¢œè‰²ï¼š</label>
      <input type="color" id="text-color" value="#000000">
      <button onclick="applyTextColor()">åº”ç”¨æ–‡å­—é¢œè‰²</button>

      <label for="card-bg-color">å¡ç‰‡èƒŒæ™¯é¢œè‰²ï¼š</label>
      <input type="color" id="card-bg-color" value="#ffffff">
      <button onclick="applyCardBackgroundColor()">åº”ç”¨å¡ç‰‡èƒŒæ™¯é¢œè‰²</button>

      <label for="card-text-color">å¡ç‰‡æ–‡å­—é¢œè‰²ï¼š</label>
      <input type="color" id="card-text-color" value="#000000">
      <button onclick="applyCardTextColor()">åº”ç”¨å¡ç‰‡æ–‡å­—é¢œè‰²</button>

      <label for="font-select">é€‰æ‹©å­—ä½“ï¼š</label>
      <select id="font-select">
        <option value="Arial">Arial</option>
        <option value="Courier New">Courier New</option>
        <option value="Georgia">Georgia</option>
        <option value="Verdana">Verdana</option>
      </select>
      <button onclick="applyFont()">åº”ç”¨å­—ä½“</button>
    </div>

    <!-- è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡ -->
    <div class="section">
      <h2>ğŸ–¼ï¸ è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡</h2>
      <input type="file" id="background-image-upload" accept="image/*">
      <button onclick="applyBackgroundImage()">åº”ç”¨èƒŒæ™¯å›¾ç‰‡</button>
    </div>

    <!-- ç¬”è®°è®°å½• -->
    <div class="section">
      <h2>ğŸ“ è®°å½•ç¬”è®°</h2>
      <select id="note-type" style="width: 100%;">
        <option value="ğŸ’¡ çµæ„Ÿ">ğŸ’¡ çµæ„Ÿ</option>
        <option value="ğŸ“– æ—¥è®°">ğŸ“– æ—¥è®°</option>
        <option value="ğŸ“š å­¦ä¹ ">ğŸ“š å­¦ä¹ </option>
      </select>
      <textarea id="note-content" placeholder="å†™ä¸‹ä½ çš„ç¬”è®°..."></textarea>
      <button onclick="saveNote()">ä¿å­˜ç¬”è®°</button>
    </div>

    <!-- æŸ¥è¯¢åŠŸèƒ½ -->
    <div class="section search-box">
      <h2>ğŸ” æŸ¥è¯¢ç¬”è®°</h2>
      <input type="text" id="search-note" placeholder="è¾“å…¥å…³é”®è¯æŸ¥è¯¢ç¬”è®°..." oninput="searchNotes()">
    </div>

    <!-- æˆ‘çš„ç¬”è®° -->
    <div class="section">
      <h2>ğŸ“œ æˆ‘çš„ç¬”è®°</h2>
      <ul id="note-list" class="note-list"></ul>
    </div>

    <!-- å›¾ç‰‡ä¸Šä¼ ä¸ä¹å®«æ ¼å±•ç¤º -->
    <div class="section">
      <h2>ğŸ–¼ï¸ å›¾ç‰‡ä¸Šä¼ </h2>
      <input type="file" id="image-upload" accept="image/*" multiple>
      <div class="gallery" id="gallery"></div>
    </div>

    <!-- éšæœºè¯­å½• -->
    <div class="section">
      <h2>ğŸŒŸ éšæœºè¯­å½•</h2>
      <button onclick="getRandomQuote()">è·å–éšæœºè¯­å½•</button>
      <p id="quote" class="loading">åŠ è½½ä¸­...</p>
    </div>
  </div>

  <script>
    let notes = [];
    let images = [];

    // åˆå§‹åŒ–æ•°æ®ï¼šä» localStorage åŠ è½½æ•°æ®
    function loadData() {
      const savedNotes = localStorage.getItem('notes');
      const savedImages = localStorage.getItem('images');
      const savedSettings = localStorage.getItem('settings');

      if (savedNotes) {
        try {
          notes = JSON.parse(savedNotes);
          renderNotes();
        } catch (e) {
          console.error('æ— æ³•è§£æç¬”è®°æ•°æ®:', e);
          notes = [];
        }
      }

      if (savedImages) {
        try {
          images = JSON.parse(savedImages);
          renderGallery();
        } catch (e) {
          console.error('æ— æ³•è§£æå›¾ç‰‡æ•°æ®:', e);
          images = [];
        }
      }

      if (savedSettings) {
        try {
          const settings = JSON.parse(savedSettings);
          applySavedSettings(settings);
        } catch (e) {
          console.error('æ— æ³•è§£æè®¾ç½®æ•°æ®:', e);
        }
      }
    }

    // ä¿å­˜æ•°æ®åˆ° localStorage
    function saveData() {
      try {
        localStorage.setItem('notes', JSON.stringify(notes));
        localStorage.setItem('images', JSON.stringify(images));
        saveSettings();
      } catch (e) {
        console.error('æ— æ³•ä¿å­˜æ•°æ®åˆ° localStorage:', e);
      }
    }

    // ä¿å­˜è‡ªå®šä¹‰è®¾ç½®
    function saveSettings() {
      const settings = {
        pageBackgroundColor: document.getElementById('page-bg-color').value,
        textColor: document.getElementById('text-color').value,
        cardBackgroundColor: document.getElementById('card-bg-color').value,
        cardTextColor: document.getElementById('card-text-color').value,
        font: document.getElementById('font-select').value,
        backgroundImage: document.body.style.backgroundImage || ''
      };
      localStorage.setItem('settings', JSON.stringify(settings));
    }

    // åº”ç”¨ä¿å­˜çš„è‡ªå®šä¹‰è®¾ç½®
    function applySavedSettings(settings) {
      document.body.style.backgroundColor = settings.pageBackgroundColor;
      document.body.style.color = settings.textColor;
      document.querySelector('.container').style.backgroundColor = settings.cardBackgroundColor;
      document.querySelector('.container').style.color = settings.cardTextColor;
      document.body.style.fontFamily = settings.font;
      if (settings.backgroundImage) {
        document.body.style.backgroundImage = settings.backgroundImage;
        document.body.style.backgroundSize = 'cover';
        document.body.style.backgroundPosition = 'center';
      }

      // æ¢å¤è¾“å…¥æ¡†å’Œä¸‹æ‹‰èœå•çš„å€¼
      document.getElementById('page-bg-color').value = settings.pageBackgroundColor;
      document.getElementById('text-color').value = settings.textColor;
      document.getElementById('card-bg-color').value = settings.cardBackgroundColor;
      document.getElementById('card-text-color').value = settings.cardTextColor;
      document.getElementById('font-select').value = settings.font;
    }

    // åº”ç”¨é¡µé¢èƒŒæ™¯é¢œè‰²
    function applyBackgroundColor() {
      const color = document.getElementById('page-bg-color').value;
      document.body.style.backgroundColor = color;
      saveSettings(); // ä¿å­˜è®¾ç½®
    }

    // åº”ç”¨é¡µé¢æ–‡å­—é¢œè‰²
    function applyTextColor() {
      const color = document.getElementById('text-color').value;
      document.body.style.color = color;
      saveSettings(); // ä¿å­˜è®¾ç½®
    }

    // åº”ç”¨å¡ç‰‡èƒŒæ™¯é¢œè‰²
    function applyCardBackgroundColor() {
      const color = document.getElementById('card-bg-color').value;
      document.querySelector('.container').style.backgroundColor = color;
      saveSettings(); // ä¿å­˜è®¾ç½®
    }

    // åº”ç”¨å¡ç‰‡æ–‡å­—é¢œè‰²
    function applyCardTextColor() {
      const color = document.getElementById('card-text-color').value;
      document.querySelector('.container').style.color = color;
      saveSettings(); // ä¿å­˜è®¾ç½®
    }

    // åº”ç”¨å­—ä½“
    function applyFont() {
      const font = document.getElementById('font-select').value;
      document.body.style.fontFamily = font;
      saveSettings(); // ä¿å­˜è®¾ç½®
    }

    // åº”ç”¨èƒŒæ™¯å›¾ç‰‡
    function applyBackgroundImage() {
      const fileInput = document.getElementById('background-image-upload');
      if (fileInput.files.length > 0) {
        const file = fileInput.files[0];
        const reader = new FileReader();
        reader.onload = function(e) {
          document.body.style.backgroundImage = `url(${e.target.result})`;
          document.body.style.backgroundSize = 'cover';
          document.body.style.backgroundPosition = 'center';
          saveSettings(); // ä¿å­˜è®¾ç½®
        };
        reader.readAsDataURL(file);
      }
    }

    // ä¿å­˜ç¬”è®°
    function saveNote() {
      const type = document.getElementById('note-type').value;
      const content = document.getElementById('note-content').value;
      if (content.trim() === '') {
        alert('ç¬”è®°å†…å®¹ä¸èƒ½ä¸ºç©ºï¼');
        return;
      }
      const timestamp = new Date().toLocaleString();
      const note = { type, content, timestamp };
      notes.push(note);
      renderNotes();
      document.getElementById('note-content').value = '';
      saveData(); // ä¿å­˜åˆ° localStorage
    }

    // æ¸²æŸ“ç¬”è®°åˆ—è¡¨
    function renderNotes() {
      const noteList = document.getElementById('note-list');
      noteList.innerHTML = '';
      notes.forEach((note, index) => {
        const li = document.createElement('li');
        li.className = 'note-item';
        li.id = `note-${index}`;
        li.innerHTML = `
          <div>
            <strong>${note.type}</strong>: ${note.content} 
            <small>(${note.timestamp})</small>
          </div>
          <div class="note-actions">
            <button onclick="editNote(${index})">ç¼–è¾‘</button>
            <button onclick="deleteNote(${index})">åˆ é™¤</button>
          </div>
        `;
        noteList.appendChild(li);
      });
    }

    // ç¼–è¾‘ç¬”è®°
    function editNote(index) {
      const newContent = prompt('è¯·è¾“å…¥æ–°çš„ç¬”è®°å†…å®¹ï¼š', notes[index].content);
      if (newContent !== null) {
        notes[index].content = newContent;
        notes[index].timestamp = new Date().toLocaleString();
        renderNotes();
        saveData(); // ä¿å­˜åˆ° localStorage
      }
    }

    // åˆ é™¤ç¬”è®°
    function deleteNote(index) {
      if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡ç¬”è®°å—ï¼Ÿ')) {
        notes.splice(index, 1);
        renderNotes();
        saveData(); // ä¿å­˜åˆ° localStorage
      }
    }

    // æŸ¥è¯¢ç¬”è®°å¹¶è‡ªåŠ¨å®šä½
    function searchNotes() {
      const query = document.getElementById('search-note').value.toLowerCase();
      if (query.trim() === '') {
        return;
      }
      const matchedIndex = notes.findIndex(note =>
        note.content.toLowerCase().includes(query)
      );
      if (matchedIndex !== -1) {
        const targetNote = document.getElementById(`note-${matchedIndex}`);
        if (targetNote) {
          targetNote.scrollIntoView({ behavior: 'smooth', block: 'center' });
          targetNote.style.backgroundColor = '#d4edda'; // é«˜äº®æ˜¾ç¤º
          setTimeout(() => {
            targetNote.style.backgroundColor = ''; // æ¢å¤åŸæ ·
          }, 2000);
        }
      } else {
        alert('æœªæ‰¾åˆ°åŒ¹é…çš„ç¬”è®°ï¼');
      }
    }

    // å›¾ç‰‡ä¸Šä¼ ä¸ä¹å®«æ ¼å±•ç¤º
    function uploadImages() {
      const files = document.getElementById('image-upload').files;
      Array.from(files).forEach(file => {
        const reader = new FileReader();
        reader.onload = function(e) {
          const img = new Image();
          img.src = e.target.result;

          // è£å‰ªä¸ºæ­£æ–¹å½¢
          img.onload = function() {
            const canvas = document.createElement('canvas');
            const size = Math.min(img.width, img.height);
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, (img.width - size) / 2, (img.height - size) / 2, size, size, 0, 0, size, size);

            const croppedImage = canvas.toDataURL();
            images.push(croppedImage);
            renderGallery();
            saveData(); // ä¿å­˜åˆ° localStorage
          };
        };
        reader.readAsDataURL(file);
      });
    }

    // æ¸²æŸ“ä¹å®«æ ¼å›¾ç‰‡
    function renderGallery() {
      const gallery = document.getElementById('gallery');
      gallery.innerHTML = '';
      images.forEach((image, index) => {
        const div = document.createElement('div');
        div.className = 'gallery-item';
        div.innerHTML = `
          <img src="${image}" alt="ä¸Šä¼ çš„å›¾ç‰‡">
          <button onclick="deleteImage(${index})">åˆ é™¤</button>
        `;
        gallery.appendChild(div);
      });
    }

    // åˆ é™¤å›¾ç‰‡
    function deleteImage(index) {
      if (confirm('ç¡®å®šè¦åˆ é™¤è¿™å¼ å›¾ç‰‡å—ï¼Ÿ')) {
        images.splice(index, 1);
        renderGallery();
        saveData(); // ä¿å­˜åˆ° localStorage
      }
    }

    // éšæœºè¯­å½•ï¼ˆ35æ¡åˆ›æ„å¥å­ï¼‰
    const quotes = [
      "äººç”Ÿæ²¡æœ‰ç™½èµ°çš„è·¯ï¼Œæ¯ä¸€æ­¥éƒ½ç®—æ•°ã€‚",
      "æ¢¦æƒ³ä»ä¸åªæ˜¯æ¢¦ï¼Œè„šè¸å®åœ°æ‰æ˜¯çœŸã€‚",
      "ä¸–ç•Œå› ä½ è€Œæ›´åŠ ç¾å¥½ã€‚",
      "æ‰€æœ‰çš„å…‰é²œäº®ä¸½ï¼ŒèƒŒåéƒ½æœ‰ä¸ä¸ºäººçŸ¥çš„åŠªåŠ›ã€‚",
      "åšæŒä¸‹å»ï¼Œä½ æ¯”æƒ³è±¡ä¸­æ›´å¼ºå¤§ã€‚",
      "ä¸è¦å®³æ€•æ”¹å˜ï¼Œå› ä¸ºæ”¹å˜æ˜¯æˆé•¿çš„å¼€å§‹ã€‚",
      "æ¯ä¸€æ¬¡å¤±è´¥ï¼Œéƒ½æ˜¯æˆåŠŸçš„ä¼ç¬”ã€‚",
      "å¿ƒæ€€å¸Œæœ›ï¼Œæœªæ¥å¯æœŸã€‚",
      "å¹³å‡¡çš„è„šæ­¥ï¼Œä¹Ÿèƒ½èµ°å‡ºä¼Ÿå¤§çš„æ—…ç¨‹ã€‚",
      "åŠªåŠ›æ˜¯ä¸ºäº†é‡è§æ›´å¥½çš„è‡ªå·±ã€‚",
      "ç”Ÿæ´»ä¸æ˜¯ç­‰å¾…é£æš´è¿‡å»ï¼Œè€Œæ˜¯å­¦ä¼šåœ¨é›¨ä¸­èµ·èˆã€‚",
      "ä»Šå¤©çš„åŠªåŠ›ï¼Œæ˜¯ä¸ºäº†æ˜å¤©çš„è‡ªç”±ã€‚",
      "æˆåŠŸä¸æ˜¯å¶ç„¶ï¼Œè€Œæ˜¯æ—¥ç§¯æœˆç´¯çš„ç»“æœã€‚",
      "ç›¸ä¿¡è‡ªå·±ï¼Œä½ æ˜¯æœ€æ£’çš„ã€‚",
      "è¶ŠåŠªåŠ›ï¼Œè¶Šå¹¸è¿ã€‚",
      "å¾®ç¬‘é¢å¯¹ç”Ÿæ´»ï¼Œé˜³å…‰æ€»ä¼šç…§è¿›æ¥ã€‚",
      "æ¯ä¸€æ»´æ±—æ°´ï¼Œéƒ½ä¼šæµ‡çŒå‡ºæœªæ¥çš„èŠ±æœµã€‚",
      "åšè‡ªå·±çš„è‹±é›„ï¼Œæ— éœ€ä»–äººè®¤å¯ã€‚",
      "äººç”Ÿå¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ã€‚",
      "æ¢¦æƒ³ä¸ä¼šé€ƒè·‘ï¼Œé€ƒè·‘çš„å¾€å¾€æ˜¯è‡ªå·±ã€‚",
      "æ¯ä¸€å¤©éƒ½æ˜¯ä¸€ä¸ªæ–°çš„èµ·ç‚¹ã€‚",
      "åšæŒåˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆã€‚",
      "ä¸æ€•è·¯é•¿ï¼Œåªæ€•å¿—çŸ­ã€‚",
      "ä¸å…¶æŠ±æ€¨é»‘æš—ï¼Œä¸å¦‚æç¯å‰è¡Œã€‚",
      "åªæœ‰æ‹¼å°½å…¨åŠ›ï¼Œæ‰èƒ½çœ‹èµ·æ¥æ¯«ä¸è´¹åŠ›ã€‚",
      "æŠŠæ—¶é—´ç•™ç»™é‡è¦çš„äº‹ï¼ŒæŠŠçˆ±ç•™ç»™å€¼å¾—çš„äººã€‚",
      "ç”Ÿå‘½çš„æ„ä¹‰åœ¨äºä¸æ–­è¶…è¶Šè‡ªå·±ã€‚",
      "åˆ«åœ¨æœ€èƒ½åƒè‹¦çš„å¹´çºªï¼Œé€‰æ‹©äº†å®‰é€¸ã€‚",
      "çœŸæ­£çš„å¼ºè€…ï¼Œæ˜¯å«ç€æ³ªè¿˜åœ¨å¥”è·‘çš„äººã€‚",
      "åªè¦å¿ƒä¸­æœ‰å…‰ï¼Œé»‘æš—å°±æ— æ³•å°†ä½ åå™¬ã€‚",
      "è¡ŒåŠ¨æ˜¯æ²»æ„ˆææƒ§çš„è‰¯è¯ã€‚",
      "ä½ è‹¥ç››å¼€ï¼Œæ¸…é£è‡ªæ¥ã€‚",
      "å‰è·¯æ¼«æ¼«ï¼Œå”¯æœ‰å¥‹æ–—ä¸è´Ÿé’æ˜¥ã€‚",
      "æ‰€æœ‰çš„åŠªåŠ›ï¼Œç»ˆå°†æˆå°±æ›´å¥½çš„è‡ªå·±ã€‚"
    ];

    // è·å–éšæœºè¯­å½•
    function getRandomQuote() {
      const randomIndex = Math.floor(Math.random() * quotes.length);
      document.getElementById('quote').textContent = quotes[randomIndex];
    }

    // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
    window.onload = function() {
      loadData(); // åŠ è½½æ•°æ®
      getRandomQuote();
      document.getElementById('image-upload').addEventListener('change', uploadImages);
    };
  </script>
</body>
</html>